<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Penilaian Guru</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icon Components
        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );

        const XCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Trash2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Edit2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
            </svg>
        );

        const Save = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                <polyline points="7 3 7 8 15 8"></polyline>
            </svg>
        );

        const X = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        function DashboardPenilaianGuru() {
            const [teachers, setTeachers] = useState([]);
            const [newTeacher, setNewTeacher] = useState({
                nama: '',
                kendiri: false,
                pencerapan1: false,
                pencerapan2: false
            });
            const [editingId, setEditingId] = useState(null);
            const [editData, setEditData] = useState({});

            useEffect(() => {
                loadData();
            }, []);

            const loadData = () => {
                try {
                    const data = localStorage.getItem('teachers-data');
                    if (data) {
                        setTeachers(JSON.parse(data));
                    }
                } catch (error) {
                    console.log('Tiada data tersimpan atau ralat:', error);
                }
            };

            const saveData = (data) => {
                try {
                    localStorage.setItem('teachers-data', JSON.stringify(data));
                } catch (error) {
                    console.error('Ralat menyimpan data:', error);
                    alert('Ralat menyimpan data. Sila cuba lagi.');
                }
            };

            const handleAddTeacher = () => {
                if (!newTeacher.nama.trim()) {
                    alert('Sila masukkan nama guru');
                    return;
                }

                const teacher = {
                    id: Date.now(),
                    ...newTeacher,
                    tarikhDaftar: new Date().toLocaleDateString('ms-MY')
                };

                const updatedTeachers = [...teachers, teacher];
                setTeachers(updatedTeachers);
                saveData(updatedTeachers);
                setNewTeacher({ nama: '', kendiri: false, pencerapan1: false, pencerapan2: false });
            };

            const handleDelete = (id) => {
                if (confirm('Adakah anda pasti mahu memadam rekod ini?')) {
                    const updatedTeachers = teachers.filter(t => t.id !== id);
                    setTeachers(updatedTeachers);
                    saveData(updatedTeachers);
                }
            };

            const startEdit = (teacher) => {
                setEditingId(teacher.id);
                setEditData({ ...teacher });
            };

            const cancelEdit = () => {
                setEditingId(null);
                setEditData({});
            };

            const saveEdit = () => {
                const updatedTeachers = teachers.map(t => 
                    t.id === editingId ? editData : t
                );
                setTeachers(updatedTeachers);
                saveData(updatedTeachers);
                setEditingId(null);
                setEditData({});
            };

            const calculateStats = () => {
                const total = teachers.length;
                const kendiri = teachers.filter(t => t.kendiri).length;
                const pencerapan1 = teachers.filter(t => t.pencerapan1).length;
                const pencerapan2 = teachers.filter(t => t.pencerapan2).length;
                const selesai = teachers.filter(t => t.kendiri && t.pencerapan1 && t.pencerapan2).length;
                
                return { total, kendiri, pencerapan1, pencerapan2, selesai };
            };

            const stats = calculateStats();

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">Dashboard Penilaian Guru</h1>
                            <p className="text-gray-600">Sistem Rekod Penyerahan Borang Penilaian</p>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                            <div className="bg-white rounded-lg shadow p-4">
                                <div className="text-2xl font-bold text-blue-600">{stats.total}</div>
                                <div className="text-sm text-gray-600">Jumlah Guru</div>
                            </div>
                            <div className="bg-white rounded-lg shadow p-4">
                                <div className="text-2xl font-bold text-green-600">{stats.kendiri}</div>
                                <div className="text-sm text-gray-600">Kendiri</div>
                            </div>
                            <div className="bg-white rounded-lg shadow p-4">
                                <div className="text-2xl font-bold text-purple-600">{stats.pencerapan1}</div>
                                <div className="text-sm text-gray-600">Pencerapan 1</div>
                            </div>
                            <div className="bg-white rounded-lg shadow p-4">
                                <div className="text-2xl font-bold text-orange-600">{stats.pencerapan2}</div>
                                <div className="text-sm text-gray-600">Pencerapan 2</div>
                            </div>
                            <div className="bg-white rounded-lg shadow p-4">
                                <div className="text-2xl font-bold text-indigo-600">{stats.selesai}</div>
                                <div className="text-sm text-gray-600">Selesai Semua</div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                            <h2 className="text-xl font-semibold text-gray-800 mb-4">Tambah Guru Baru</h2>
                            <div className="flex flex-wrap gap-4 items-end">
                                <div className="flex-1 min-w-64">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Nama Guru
                                    </label>
                                    <input
                                        type="text"
                                        value={newTeacher.nama}
                                        onChange={(e) => setNewTeacher({ ...newTeacher, nama: e.target.value })}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="Contoh: Puan Siti Aminah"
                                    />
                                </div>
                                <div className="flex gap-4">
                                    <label className="flex items-center gap-2">
                                        <input
                                            type="checkbox"
                                            checked={newTeacher.kendiri}
                                            onChange={(e) => setNewTeacher({ ...newTeacher, kendiri: e.target.checked })}
                                            className="w-4 h-4 text-blue-600"
                                        />
                                        <span className="text-sm">Kendiri</span>
                                    </label>
                                    <label className="flex items-center gap-2">
                                        <input
                                            type="checkbox"
                                            checked={newTeacher.pencerapan1}
                                            onChange={(e) => setNewTeacher({ ...newTeacher, pencerapan1: e.target.checked })}
                                            className="w-4 h-4 text-blue-600"
                                        />
                                        <span className="text-sm">Pencerapan 1</span>
                                    </label>
                                    <label className="flex items-center gap-2">
                                        <input
                                            type="checkbox"
                                            checked={newTeacher.pencerapan2}
                                            onChange={(e) => setNewTeacher({ ...newTeacher, pencerapan2: e.target.checked })}
                                            className="w-4 h-4 text-blue-600"
                                        />
                                        <span className="text-sm">Pencerapan 2</span>
                                    </label>
                                </div>
                                <button
                                    onClick={handleAddTeacher}
                                    className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors"
                                >
                                    <Plus size={20} />
                                    Tambah
                                </button>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead className="bg-gray-50">
                                        <tr>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Bil</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nama Guru</th>
                                            <th className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">Kendiri</th>
                                            <th className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">Pencerapan 1</th>
                                            <th className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">Pencerapan 2</th>
                                            <th className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">Tarikh Daftar</th>
                                            <th className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase">Tindakan</th>
                                        </tr>
                                    </thead>
                                    <tbody className="bg-white divide-y divide-gray-200">
                                        {teachers.length === 0 ? (
                                            <tr>
                                                <td colSpan="7" className="px-6 py-8 text-center text-gray-500">
                                                    Tiada data guru. Sila tambah guru baru.
                                                </td>
                                            </tr>
                                        ) : (
                                            teachers.map((teacher, index) => (
                                                <tr key={teacher.id} className="hover:bg-gray-50">
                                                    <td className="px-6 py-4 text-sm text-gray-900">{index + 1}</td>
                                                    <td className="px-6 py-4 text-sm">
                                                        {editingId === teacher.id ? (
                                                            <input
                                                                type="text"
                                                                value={editData.nama}
                                                                onChange={(e) => setEditData({ ...editData, nama: e.target.value })}
                                                                className="w-full px-2 py-1 border border-gray-300 rounded"
                                                            />
                                                        ) : (
                                                            <span className="font-medium text-gray-900">{teacher.nama}</span>
                                                        )}
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        {editingId === teacher.id ? (
                                                            <input
                                                                type="checkbox"
                                                                checked={editData.kendiri}
                                                                onChange={(e) => setEditData({ ...editData, kendiri: e.target.checked })}
                                                                className="w-4 h-4"
                                                            />
                                                        ) : (
                                                            teacher.kendiri ? 
                                                                <CheckCircle className="inline text-green-500" size={20} /> : 
                                                                <XCircle className="inline text-gray-300" size={20} />
                                                        )}
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        {editingId === teacher.id ? (
                                                            <input
                                                                type="checkbox"
                                                                checked={editData.pencerapan1}
                                                                onChange={(e) => setEditData({ ...editData, pencerapan1: e.target.checked })}
                                                                className="w-4 h-4"
                                                            />
                                                        ) : (
                                                            teacher.pencerapan1 ? 
                                                                <CheckCircle className="inline text-green-500" size={20} /> : 
                                                                <XCircle className="inline text-gray-300" size={20} />
                                                        )}
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        {editingId === teacher.id ? (
                                                            <input
                                                                type="checkbox"
                                                                checked={editData.pencerapan2}
                                                                onChange={(e) => setEditData({ ...editData, pencerapan2: e.target.checked })}
                                                                className="w-4 h-4"
                                                            />
                                                        ) : (
                                                            teacher.pencerapan2 ? 
                                                                <CheckCircle className="inline text-green-500" size={20} /> : 
                                                                <XCircle className="inline text-gray-300" size={20} />
                                                        )}
                                                    </td>
                                                    <td className="px-6 py-4 text-sm text-gray-600 text-center">{teacher.tarikhDaftar}</td>
                                                    <td className="px-6 py-4 text-center">
                                                        {editingId === teacher.id ? (
                                                            <div className="flex justify-center gap-2">
                                                                <button
                                                                    onClick={saveEdit}
                                                                    className="text-green-600 hover:text-green-800"
                                                                    title="Simpan"
                                                                >
                                                                    <Save size={18} />
                                                                </button>
                                                                <button
                                                                    onClick={cancelEdit}
                                                                    className="text-gray-600 hover:text-gray-800"
                                                                    title="Batal"
                                                                >
                                                                    <X size={18} />
                                                                </button>
                                                            </div>
                                                        ) : (
                                                            <div className="flex justify-center gap-2">
                                                                <button
                                                                    onClick={() => startEdit(teacher)}
                                                                    className="text-blue-600 hover:text-blue-800"
                                                                    title="Edit"
                                                                >
                                                                    <Edit2 size={18} />
                                                                </button>
                                                                <button
                                                                    onClick={() => handleDelete(teacher.id)}
                                                                    className="text-red-600 hover:text-red-800"
                                                                    title="Padam"
                                                                >
                                                                    <Trash2 size={18} />
                                                                </button>
                                                            </div>
                                                        )}
                                                    </td>
                                                </tr>
                                            ))
                                        )}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div className="mt-6 text-center text-sm text-gray-600">
                            <p>Data akan tersimpan secara automatik dalam pelayar anda</p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<DashboardPenilaianGuru />, document.getElementById('root'));
    </script>
</body>
</html>